<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EROAD - Welfare First Onboarding Process Flow</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 15px rgba(16, 185, 129, 0.4); }
      50% { box-shadow: 0 0 25px rgba(16, 185, 129, 0.7); }
    }
    .api-highlight {
      animation: pulse-glow 2.5s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;
    
    // SVG Icons
    const Zap = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
      </svg>
    );
    
    const CheckCircle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const AlertCircle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const XCircle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const Info = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const Eye = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
      </svg>
    );
    
    const EyeOff = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
      </svg>
    );
    
    const ChevronRight = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
      </svg>
    );
    
    const Database = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
      </svg>
    );

    const App = () => {
      const [selectedNode, setSelectedNode] = useState(null);
      const [showIdealState, setShowIdealState] = useState(false);

      const nodeData = {
        signup: {
          title: "New Customer Signs Up",
          details: "Sales Operations receives new customer signup",
          status: "trigger",
          dependencies: [],
          currentState: "Manual handoff to Sales Ops team",
          idealState: "Automated workflow trigger"
        },
        parallel: {
          title: "EROAD Sales Ops - Parallel Actions",
          details: "Three automated emails sent simultaneously",
          status: "current",
          subSteps: [
            "Email 1: MyEROAD credentials ‚Üí Welfare First",
            "Email 2: API vault link ‚Üí Welfare First",
            "Email 3: Onboarding form ‚Üí Customer"
          ],
          dependencies: ["Customer signup"],
          currentState: "All emails triggered by Sales Ops",
          idealState: "Same process, works well"
        },
        myeroad: {
          title: "MyEROAD Portal Access",
          details: "Welfare First receives credentials and accesses portal",
          status: "current",
          subSteps: [
            "Receive username + temp password",
            "Log into MyEROAD portal",
            "Reset password",
            "Access confirmed (no notification to EROAD)"
          ],
          dependencies: ["EROAD sends credentials"],
          currentState: "‚úÖ Access assumed complete unless issue reported",
          idealState: "Auto-confirmation to EROAD when first login successful",
          gap: "No visibility on access completion"
        },
        apiVault: {
          title: "API Key Retrieval",
          details: "Welfare First accesses secure vault for API keys",
          status: "current",
          subSteps: [
            "Receive vault link email",
            "Access vault (link may expire)",
            "Retrieve API key + secret",
            "Store securely"
          ],
          dependencies: ["API vault email"],
          failures: [
            "Vault link expired ‚Üí Contact Sales Ops",
            "API keys incorrect ‚Üí Request new keys"
          ],
          currentState: "Manual retrieval and error handling",
          idealState: "Extended vault validity, rotation alerts"
        },
        customerForm: {
          title: "Customer Onboarding Form",
          details: "Customer completes onboarding form with critical data",
          status: "current",
          subSteps: [
            "Customer receives form email",
            "Fills vehicle rego (required)",
            "Fills escalation contacts (required)",
            "Submits form"
          ],
          dependencies: ["Form email sent by EROAD"],
          currentState: "If incomplete ‚Üí WF manually reaches out",
          idealState: "Mandatory field validation before submission",
          gap: "Customer can submit incomplete forms",
          blocking: "Cannot proceed without: Vehicle rego, Contact name, Phone"
        },
        wfSetup: {
          title: "Welfare First Setup & Configuration",
          details: "Complete onboarding setup with API integration",
          status: "warning",
          subSteps: [
            "Step 1: Create Enterprise Account",
            "Step 2: Add API keys from vault",
            "Step 3: üîå API Integration & Verification",
            "Step 4: Map vehicles from form",
            "Step 5: Add escalation contacts",
            "Step 6: Mark 'Ready for Monitoring'"
          ],
          apiDetails: {
            desc: "Add API keys and verify vehicle data sync",
            steps: [
              "‚úÖ API keys added to WF system",
              "‚úÖ Vehicles appear instantly",
              "‚úÖ Vehicle data verified"
            ],
            failures: [
              "API Key Error ‚Üí Contact Sales Ops",
              "Expired Vault Link ‚Üí Request new link"
            ]
          },
          dependencies: ["MyEROAD access", "API keys", "Customer form"],
          currentState: "Manual process tracked in spreadsheet",
          idealState: "Automated status tracking with real-time dashboard",
          gap: "No centralized onboarding management tool"
        },
        wfLive: {
          title: "WF Notifies 'Live'",
          details: "Welfare First emails Sales Ops confirming ready",
          status: "warning",
          subSteps: [
            "All setup complete",
            "Email Sales Ops: 'WF is live for [Customer]'",
            "Sales Ops notifies customer (WF not copied)"
          ],
          dependencies: ["All WF setup complete"],
          currentState: "No visibility on what happens next",
          idealState: "Auto-notification with CC to WF",
          gap: "Communication breakdown after this point"
        },
        monitoring: {
          title: "üö® Monitoring Activation",
          details: "Customer toggles monitoring in MyEROAD",
          status: "critical-gap",
          subSteps: [
            "Customer receives notification (assumed)",
            "Customer toggles monitoring ON",
            "‚ö†Ô∏è WF has ZERO visibility",
            "‚ö†Ô∏è No timestamp captured",
            "‚ö†Ô∏è May turn OFF without notification"
          ],
          dependencies: ["WF notifies live"],
          currentState: "‚ùå COMPLETE BLIND SPOT",
          idealState: "üéØ Webhook when toggled ON/OFF with timestamp",
          gap: "BILLING MISALIGNMENT RISK",
          impact: "High - billing accuracy, customer satisfaction"
        },
        active: {
          title: "Active Monitoring",
          details: "Welfare First monitors vehicles",
          status: "current",
          subSteps: [
            "Monitor vehicles via API",
            "Access fatigue alerts",
            "Manage escalations"
          ],
          dependencies: ["Monitoring activated"],
          currentState: "‚úÖ Operational",
          idealState: "Real-time monitoring status visible"
        },
        offboard: {
          title: "Offboarding Request",
          details: "Customer requests offboarding",
          status: "current",
          subSteps: [
            "Customer emails WF (current)",
            "Future: Change Manager Portal"
          ],
          dependencies: ["Customer decision"],
          currentState: "Manual email request",
          idealState: "Automated portal workflow"
        },
        wfOffboard: {
          title: "WF Offboards",
          details: "Welfare First removes vehicle/account",
          status: "critical-gap",
          subSteps: [
            "Receive offboarding request",
            "Remove from WF system",
            "‚ö†Ô∏è EROAD not notified"
          ],
          dependencies: ["Offboard request"],
          currentState: "‚ùå No automatic notification",
          idealState: "üéØ Auto-notify EROAD with timestamp",
          gap: "EROAD continues billing"
        },
        billing: {
          title: "üö® Billing Misalignment",
          details: "EROAD continues billing after WF offboards",
          status: "critical-gap",
          subSteps: [
            "WF offboards vehicle",
            "EROAD unaware",
            "EROAD continues billing",
            "Manual reconciliation required"
          ],
          dependencies: ["Offboarding"],
          currentState: "‚ùå Manual reconciliation, disputes",
          idealState: "üéØ Auto-sync triggers billing stop",
          impact: "High - financial reconciliation overhead"
        }
      };

      const getIcon = (status) => {
        const icons = {
          trigger: <Zap className="w-5 h-5 text-blue-600" />,
          current: <CheckCircle className="w-5 h-5 text-emerald-500" />,
          warning: <AlertCircle className="w-5 h-5 text-amber-500" />,
          'critical-gap': <XCircle className="w-5 h-5 text-rose-500" />
        };
        return icons[status] || <Info className="w-5 h-5 text-slate-500" />;
      };

      const getStyle = (status) => {
        const base = "transition-all duration-300 hover:scale-105 hover:shadow-2xl cursor-pointer";
        const styles = {
          trigger: `${base} bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg`,
          current: `${base} bg-white border-2 border-emerald-400 shadow-md`,
          warning: `${base} bg-white border-2 border-amber-400 shadow-md`,
          'critical-gap': `${base} bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg`
        };
        return styles[status] || `${base} bg-white border-2 border-slate-300`;
      };

      const Node = ({ id, title, status, x, y, w = 240 }) => (
        <div 
          className={`absolute ${getStyle(status)} rounded-xl p-4`}
          style={{ left: x, top: y, width: w }}
          onClick={() => setSelectedNode(id)}
        >
          <div className="flex items-start gap-3">
            <div className="mt-0.5">{getIcon(status)}</div>
            <h3 className={`font-semibold text-sm leading-tight ${status === 'trigger' || status === 'critical-gap' ? 'text-white' : 'text-slate-800'}`}>
              {title}
            </h3>
          </div>
        </div>
      );

      const Line = ({ x1, y1, x2, y2, color = "slate", dash = false }) => {
        const colors = { slate: '#cbd5e1', blue: '#60a5fa', amber: '#fbbf24', rose: '#f43f5e', emerald: '#10b981' };
        const isVertical = x1 === x2;
        return (
          <div 
            className="absolute"
            style={{
              left: isVertical ? x1 - 1 : x1,
              top: isVertical ? y1 : y1 - 1,
              width: isVertical ? 2 : x2 - x1,
              height: isVertical ? y2 - y1 : 2,
              backgroundColor: dash ? 'transparent' : colors[color],
              backgroundImage: dash ? (isVertical ? 
                `repeating-linear-gradient(to bottom, ${colors[color]} 0, ${colors[color]} 4px, transparent 4px, transparent 8px)` :
                `repeating-linear-gradient(to right, ${colors[color]} 0, ${colors[color]} 4px, transparent 4px, transparent 8px)`) : 'none'
            }}
          />
        );
      };

      const Arrow = ({ x, y, color = "slate" }) => {
        const colors = { slate: '#94a3b8', blue: '#60a5fa', amber: '#fbbf24', rose: '#f43f5e', emerald: '#10b981' };
        return (
          <div 
            className="absolute w-0 h-0"
            style={{
              left: x - 4,
              top: y,
              borderLeft: '4px solid transparent',
              borderRight: '4px solid transparent',
              borderTop: `8px solid ${colors[color]}`
            }}
          />
        );
      };

      const cx = 450, lx = 120, rx = 780;

      return (
        <div className="w-full min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
          {/* Header */}
          <div className="sticky top-0 bg-white/80 backdrop-blur-lg border-b border-slate-200 shadow-sm z-50">
            <div className="max-w-7xl mx-auto px-6 py-5 flex justify-between items-center">
              <div>
                <h1 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">
                  EROAD ‚Üí Welfare First
                </h1>
                <p className="text-slate-600 text-sm mt-1">Customer Onboarding Process Flow</p>
              </div>
              <button
                onClick={() => setShowIdealState(!showIdealState)}
                className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md"
              >
                {showIdealState ? <EyeOff className="w-4 h-4" /> : <Eye className="w-4 h-4" />}
                <span className="font-medium">{showIdealState ? 'Current State' : 'Show Ideal State'}</span>
              </button>
            </div>
          </div>

          {/* Legend */}
          <div className="max-w-7xl mx-auto px-6 mt-6">
            <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
              <div className="flex flex-wrap items-center gap-6 text-sm">
                <div className="flex items-center gap-2">
                  <Zap className="w-4 h-4 text-blue-600" />
                  <span className="text-slate-700 font-medium">Trigger</span>
                </div>
                <div className="flex items-center gap-2">
                  <CheckCircle className="w-4 h-4 text-emerald-500" />
                  <span className="text-slate-700 font-medium">Active</span>
                </div>
                <div className="flex items-center gap-2">
                  <AlertCircle className="w-4 h-4 text-amber-500" />
                  <span className="text-slate-700 font-medium">Warning</span>
                </div>
                <div className="flex items-center gap-2">
                  <XCircle className="w-4 h-4 text-rose-500" />
                  <span className="text-slate-700 font-medium">Critical Gap</span>
                </div>
                <div className="flex items-center gap-2">
                  <Database className="w-4 h-4 text-emerald-600" />
                  <span className="text-slate-700 font-medium">API Integration</span>
                </div>
              </div>
            </div>
          </div>

          {/* Flowchart */}
          <div className="max-w-7xl mx-auto px-6 py-8">
            <div className="bg-white rounded-2xl shadow-xl border border-slate-200 p-12 relative" style={{ minHeight: '1500px' }}>
              
              {/* Grid Background */}
              <div className="absolute inset-0 opacity-30 pointer-events-none" style={{
                backgroundImage: 'radial-gradient(circle, #e2e8f0 1px, transparent 1px)',
                backgroundSize: '30px 30px'
              }} />

              {/* Nodes */}
              <Node id="signup" title="New Customer Signs Up" status="trigger" x={cx-120} y={20} />
              
              <Line x1={cx} y1={80} x2={cx} y2={120} color="blue" />
              <Arrow x={cx} y={120} color="blue" />
              
              <Node id="parallel" title="EROAD Sales Ops - Parallel Actions" status="current" x={cx-120} y={130} />
              
              <Line x1={cx} y1={190} x2={cx} y2={220} />
              <Line x1={lx+120} y1={220} x2={rx+120} y2={220} />
              <Line x1={lx+120} y1={220} x2={lx+120} y2={260} />
              <Line x1={cx} y1={220} x2={cx} y2={260} />
              <Line x1={rx+120} y1={220} x2={rx+120} y2={260} />
              <Arrow x={lx+120} y={260} />
              <Arrow x={cx} y={260} />
              <Arrow x={rx+120} y={260} />
              
              <Node id="myeroad" title="MyEROAD Portal Access" status="current" x={lx} y={270} />
              <Node id="apiVault" title="API Key Retrieval" status="current" x={cx-120} y={270} />
              <Node id="customerForm" title="Customer Onboarding Form" status="current" x={rx} y={270} />
              
              <Line x1={lx+120} y1={350} x2={lx+120} y2={410} dash color="amber" />
              <Line x1={cx} y1={350} x2={cx} y2={410} dash color="amber" />
              <Line x1={rx+120} y1={350} x2={rx+120} y2={410} dash color="amber" />
              <Line x1={lx+120} y1={410} x2={rx+120} y2={410} dash color="amber" />
              <Line x1={cx} y1={410} x2={cx} y2={450} dash color="amber" />
              <Arrow x={cx} y={450} color="amber" />
              
              <Node id="wfSetup" title="Welfare First Setup & Configuration" status="warning" x={cx-120} y={460} />
              
              {/* API Integration Highlight */}
              <div 
                className="absolute api-highlight bg-gradient-to-br from-emerald-50 to-emerald-100 border-2 border-emerald-400 rounded-lg p-3"
                style={{ left: cx+150, top: 465, width: 200 }}
              >
                <div className="flex items-center gap-2 mb-2">
                  <Database className="w-4 h-4 text-emerald-600" />
                  <span className="text-xs font-bold text-emerald-900">Step 3: API Integration</span>
                </div>
                <div className="text-xs text-emerald-800">Critical sub-process within WF Setup</div>
              </div>
              
              <Line x1={cx+120} y1={490} x2={cx+150} y2={490} color="emerald" />
              
              <Line x1={cx} y1={540} x2={cx} y2={580} />
              <Arrow x={cx} y={580} />
              
              <Node id="wfLive" title="WF Notifies 'Live'" status="warning" x={cx-120} y={590} />
              
              <Line x1={cx} y1={670} x2={cx} y2={710} dash color="rose" />
              <Arrow x={cx} y={710} color="rose" />
              
              <Node id="monitoring" title="üö® Monitoring Activation" status="critical-gap" x={cx-120} y={720} />
              
              <Line x1={cx} y1={800} x2={cx} y2={840} dash color="rose" />
              <Arrow x={cx} y={840} color="rose" />
              
              <Node id="active" title="Active Monitoring" status="current" x={cx-120} y={850} />
              
              <Line x1={cx} y1={930} x2={cx} y2={970} />
              <Arrow x={cx} y={970} />
              
              <Node id="offboard" title="Offboarding Request" status="current" x={cx-120} y={980} />
              
              <Line x1={cx} y1={1060} x2={cx} y2={1100} color="rose" />
              <Arrow x={cx} y={1100} color="rose" />
              
              <Node id="wfOffboard" title="WF Offboards" status="critical-gap" x={cx-120} y={1110} />
              
              <Line x1={cx} y1={1190} x2={cx} y2={1220} color="rose" />
              <Line x1={cx} y1={1220} x2={rx+60} y2={1220} color="rose" />
              <Line x1={rx+60} y1={1220} x2={rx+60} y2={1260} color="rose" />
              <Arrow x={rx+60} y={1260} color="rose" />
              
              <Node id="billing" title="üö® Billing Misalignment" status="critical-gap" x={rx-60} y={1270} />

            </div>
          </div>

          {/* Ideal State Modal */}
          {showIdealState && (
            <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto">
              <div className="bg-white rounded-2xl shadow-2xl max-w-5xl w-full my-8">
                <div className="sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-5 flex justify-between items-center rounded-t-2xl">
                  <div>
                    <h2 className="font-bold text-2xl">üéØ Ideal State Vision</h2>
                    <p className="text-blue-100 text-sm mt-1">Fully automated, connected workflow</p>
                  </div>
                  <button 
                    onClick={() => setShowIdealState(false)} 
                    className="text-white text-3xl leading-none hover:bg-white/10 rounded-full w-10 h-10 flex items-center justify-center"
                  >√ó</button>
                </div>
                
                <div className="p-8 space-y-5 max-h-[calc(90vh-80px)] overflow-y-auto">
                  <div className="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border-2 border-blue-200">
                    <h3 className="font-bold text-blue-900 text-lg mb-3">üöÄ Automated Workflow Vision</h3>
                    <p className="text-blue-800 leading-relaxed text-sm">
                      A fully integrated system that tracks progress from account creation to monitoring activation, 
                      with real-time status updates, automated notifications, and complete billing alignment.
                    </p>
                  </div>

                  <div className="grid gap-4">
                    <div className="bg-white border-2 border-emerald-200 rounded-xl p-5">
                      <h4 className="font-semibold text-emerald-900 mb-3 flex items-center gap-2">
                        <CheckCircle className="w-5 h-5" />
                        1. Automated Account Provisioning
                      </h4>
                      <ul className="text-sm text-slate-700 space-y-1.5 ml-7">
                        <li>‚Ä¢ MyEROAD account auto-created with first login confirmation webhook</li>
                        <li>‚Ä¢ API keys auto-generated with extended validity and rotation alerts</li>
                        <li>‚Ä¢ Onboarding form with mandatory field validation before submission</li>
                      </ul>
                    </div>

                    <div className="bg-white border-2 border-blue-200 rounded-xl p-5">
                      <h4 className="font-semibold text-blue-900 mb-3 flex items-center gap-2">
                        <Zap className="w-5 h-5" />
                        2. Real-Time Integration Status Dashboard
                      </h4>
                      <ul className="text-sm text-slate-700 space-y-1.5 ml-7">
                        <li>‚Ä¢ Live status tracking: MyEROAD access, API integration, form submission</li>
                        <li>‚Ä¢ Completion percentage visible to both WF and EROAD</li>
                        <li>‚Ä¢ Automated alerts for incomplete steps or errors</li>
                        <li>‚Ä¢ Replace manual tracking with centralized onboarding management tool</li>
                      </ul>
                    </div>

                    <div className="bg-white border-2 border-amber-200 rounded-xl p-5">
                      <h4 className="font-semibold text-amber-900 mb-3 flex items-center gap-2">
                        <AlertCircle className="w-5 h-5" />
                        3. Monitoring Activation Visibility (CRITICAL)
                      </h4>
                      <ul className="text-sm text-slate-700 space-y-1.5 ml-7">
                        <li>‚Ä¢ <strong>Webhook notification</strong> when customer toggles monitoring ON/OFF</li>
                        <li>‚Ä¢ Payload includes: timestamp, vehicle list, monitoring status</li>
                        <li>‚Ä¢ Visible in WF dashboard with exact activation date/time</li>
                        <li>‚Ä¢ Automated billing alignment with EROAD systems</li>
                      </ul>
                    </div>

                    <div className="bg-white border-2 border-rose-200 rounded-xl p-5">
                      <h4 className="font-semibold text-rose-900 mb-3 flex items-center gap-2">
                        <XCircle className="w-5 h-5" />
                        4. Offboarding Synchronization (CRITICAL)
                      </h4>
                      <ul className="text-sm text-slate-700 space-y-1.5 ml-7">
                        <li>‚Ä¢ WF offboarding triggers automatic notification to EROAD</li>
                        <li>‚Ä¢ EROAD billing system updated with exact offboard timestamp</li>
                        <li>‚Ä¢ Customer Change Manager Portal integration (when ready)</li>
                        <li>‚Ä¢ Prorata billing automatically calculated and aligned</li>
                      </ul>
                    </div>

                    <div className="bg-white border-2 border-indigo-200 rounded-xl p-5">
                      <h4 className="font-semibold text-indigo-900 mb-3 flex items-center gap-2">
                        <Info className="w-5 h-5" />
                        5. Complete Communication Loop
                      </h4>
                      <ul className="text-sm text-slate-700 space-y-1.5 ml-7">
                        <li>‚Ä¢ All customer notifications CC Welfare First</li>
                        <li>‚Ä¢ Automated confirmation when customer receives monitoring instructions</li>
                        <li>‚Ä¢ Shared view of customer journey between EROAD and WF</li>
                        <li>‚Ä¢ Clear audit trail for compliance and billing disputes</li>
                      </ul>
                    </div>
                  </div>

                  <div className="bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl p-6 border-2 border-emerald-300">
                    <h3 className="font-bold text-emerald-900 text-lg mb-3">‚úÖ Expected Outcomes</h3>
                    <div className="grid md:grid-cols-2 gap-4 text-sm">
                      <div>
                        <div className="font-semibold text-emerald-800 mb-2">Operational Benefits</div>
                        <ul className="text-slate-700 space-y-1">
                          <li>‚Ä¢ Zero billing misalignment</li>
                          <li>‚Ä¢ Reduced manual reconciliation</li>
                          <li>‚Ä¢ Real-time visibility for both parties</li>
                          <li>‚Ä¢ Faster onboarding cycles</li>
                        </ul>
                      </div>
                      <div>
                        <div className="font-semibold text-emerald-800 mb-2">Business Impact</div>
                        <ul className="text-slate-700 space-y-1">
                          <li>‚Ä¢ Improved customer satisfaction</li>
                          <li>‚Ä¢ Reduced support overhead</li>
                          <li>‚Ä¢ Accurate financial reporting</li>
                          <li>‚Ä¢ Complete audit trail</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Detail Panel */}
          {selectedNode && nodeData[selectedNode] && (
            <div className="fixed right-0 top-0 h-full w-[420px] bg-white shadow-2xl z-50 border-l overflow-y-auto">
              <div className="sticky top-0 bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 flex justify-between items-center">
                <h2 className="font-bold text-lg">Process Details</h2>
                <button onClick={() => setSelectedNode(null)} className="text-white text-2xl">√ó</button>
              </div>
              
              <div className="p-6 space-y-6">
                <div className="flex items-center gap-3">
                  {getIcon(nodeData[selectedNode].status)}
                  <h3 className="font-bold text-xl text-slate-800">{nodeData[selectedNode].title}</h3>
                </div>

                <div className="text-slate-700 leading-relaxed">{nodeData[selectedNode].details}</div>

                {nodeData[selectedNode].subSteps && (
                  <div className="bg-slate-50 rounded-lg p-4 border">
                    <h4 className="font-semibold text-slate-800 mb-3">Process Steps</h4>
                    <div className="space-y-2">
                      {nodeData[selectedNode].subSteps.map((step, i) => (
                        <div key={i} className="flex items-start gap-2 text-sm text-slate-700">
                          <ChevronRight className="w-4 h-4 mt-0.5 text-slate-400 flex-shrink-0" />
                          <span>{step}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {nodeData[selectedNode].apiDetails && (
                  <div className="bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg p-5 border-2 border-emerald-300">
                    <div className="flex items-center gap-2 mb-3">
                      <Database className="w-5 h-5 text-emerald-700" />
                      <h4 className="font-semibold text-emerald-900">API Integration & Verification</h4>
                    </div>
                    <p className="text-sm text-emerald-800 mb-3">{nodeData[selectedNode].apiDetails.desc}</p>
                    
                    <div className="mb-3">
                      <div className="text-xs font-semibold text-emerald-900 mb-2">Verification Process:</div>
                      {nodeData[selectedNode].apiDetails.steps.map((step, i) => (
                        <div key={i} className="text-xs text-emerald-800 mb-1">{step}</div>
                      ))}
                    </div>

                    <div className="bg-white/60 rounded p-3 border border-emerald-200">
                      <div className="text-xs font-semibold text-rose-900 mb-2">Potential Failures:</div>
                      {nodeData[selectedNode].apiDetails.failures.map((failure, i) => (
                        <div key={i} className="text-xs text-rose-800 mb-1">‚ùå {failure}</div>
                      ))}
                    </div>
                  </div>
                )}

                {nodeData[selectedNode].failures && (
                  <div className="bg-rose-50 rounded-lg p-4 border border-rose-200">
                    <h4 className="font-semibold text-rose-900 mb-3">Failure Scenarios</h4>
                    <div className="space-y-2">
                      {nodeData[selectedNode].failures.map((failure, i) => (
                        <div key={i} className="text-sm text-rose-800">‚ö†Ô∏è {failure}</div>
                      ))}
                    </div>
                  </div>
                )}

                {nodeData[selectedNode].blocking && (
                  <div className="bg-rose-100 rounded-lg p-4 border-2 border-rose-400">
                    <h4 className="font-semibold text-rose-900 mb-2">‚õî Blocking Issues</h4>
                    <p className="text-sm text-rose-800">{nodeData[selectedNode].blocking}</p>
                  </div>
                )}

                {nodeData[selectedNode].dependencies && nodeData[selectedNode].dependencies.length > 0 && (
                  <div>
                    <h4 className="font-semibold text-slate-800 mb-2">Dependencies</h4>
                    <div className="space-y-1.5">
                      {nodeData[selectedNode].dependencies.map((dep, i) => (
                        <div key={i} className="text-sm text-slate-600 flex items-center gap-2">
                          <div className="w-1.5 h-1.5 rounded-full bg-slate-400" />
                          {dep}
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <div className="border-t pt-6 space-y-4">
                  <div>
                    <h4 className="font-semibold text-emerald-700 mb-2 flex items-center gap-2">
                      <CheckCircle className="w-4 h-4" />
                      Current State
                    </h4>
                    <p className="text-sm text-slate-700 leading-relaxed">{nodeData[selectedNode].currentState}</p>
                  </div>
                  
                  <div className={nodeData[selectedNode].idealState.includes('üéØ') ? 'bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200' : ''}>
                    <h4 className="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                      <Zap className="w-4 h-4" />
                      Ideal State
                    </h4>
                    <p className="text-sm text-slate-700 leading-relaxed">{nodeData[selectedNode].idealState}</p>
                  </div>
                </div>

                {nodeData[selectedNode].gap && (
                  <div className="bg-amber-50 border-l-4 border-amber-500 rounded-r-lg p-4">
                    <h4 className="font-semibold text-amber-900 mb-2">‚ö†Ô∏è Identified Gap</h4>
                    <p className="text-sm text-amber-800 leading-relaxed">{nodeData[selectedNode].gap}</p>
                  </div>
                )}

                {nodeData[selectedNode].impact && (
                  <div className="bg-rose-50 border-l-4 border-rose-500 rounded-r-lg p-4">
                    <h4 className="font-semibold text-rose-900 mb-2">üìä Business Impact</h4>
                    <p className="text-sm text-rose-800 leading-relaxed">{nodeData[selectedNode].impact}</p>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Summary Cards */}
          <div className="max-w-7xl mx-auto px-6 pb-8">
            <div className="grid grid-cols-3 gap-6">
              <div className="bg-gradient-to-br from-rose-50 to-rose-100 border-2 border-rose-300 rounded-xl p-6 shadow-lg">
                <h3 className="font-bold text-rose-900 mb-4 flex items-center gap-2 text-lg">
                  <XCircle className="w-5 h-5" />
                  Critical Gaps (2)
                </h3>
                <div className="space-y-3 text-sm text-rose-800">
                  <div className="bg-white/60 rounded-lg p-3">
                    <strong>Monitoring Activation:</strong> Zero visibility when customer toggles ON/OFF
                  </div>
                  <div className="bg-white/60 rounded-lg p-3">
                    <strong>Offboarding Sync:</strong> EROAD continues billing after WF offboards
                  </div>
                </div>
              </div>

              <div className="bg-gradient-to-br from-amber-50 to-amber-100 border-2 border-amber-300 rounded-xl p-6 shadow-lg">
                <h3 className="font-bold text-amber-900 mb-4 flex items-center gap-2 text-lg">
                  <AlertCircle className="w-5 h-5" />
                  Process Gaps (4)
                </h3>
                <div className="space-y-2 text-sm text-amber-800">
                  <div>‚Ä¢ No MyEROAD access confirmation loop</div>
                  <div>‚Ä¢ Customer can submit incomplete forms</div>
                  <div>‚Ä¢ Manual status tracking (no workflow tool)</div>
                  <div>‚Ä¢ Lost visibility after "Live" notification</div>
                </div>
              </div>

              <div className="bg-gradient-to-br from-emerald-50 to-emerald-100 border-2 border-emerald-300 rounded-xl p-6 shadow-lg">
                <h3 className="font-bold text-emerald-900 mb-4 flex items-center gap-2 text-lg">
                  <CheckCircle className="w-5 h-5" />
                  Works Well (3)
                </h3>
                <div className="space-y-2 text-sm text-emerald-800">
                  <div>‚Ä¢ Parallel automated emails from Sales Ops</div>
                  <div>‚Ä¢ Instant API verification (vehicles appear)</div>
                  <div>‚Ä¢ Clear failure feedback for API errors</div>
                </div>
              </div>
            </div>

            {/* Recommendations */}
            <div className="mt-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-8 shadow-xl">
              <h3 className="font-bold text-blue-900 mb-6 text-2xl flex items-center gap-3">
                <Zap className="w-6 h-6" />
                Key Recommendations for EROAD Meeting
              </h3>
              <div className="grid grid-cols-2 gap-6">
                <div className="bg-white/70 rounded-lg p-5 border border-blue-200">
                  <h4 className="font-semibold text-blue-900 mb-3">Priority 1: Monitoring Visibility</h4>
                  <ul className="text-sm text-blue-800 space-y-2">
                    <li>‚Ä¢ Request webhook/API when customer toggles monitoring ON/OFF</li>
                    <li>‚Ä¢ Include timestamp + vehicle list in notification</li>
                    <li>‚Ä¢ Enables accurate billing alignment</li>
                  </ul>
                </div>
                <div className="bg-white/70 rounded-lg p-5 border border-blue-200">
                  <h4 className="font-semibold text-blue-900 mb-3">Priority 2: Offboarding Sync</h4>
                  <ul className="text-sm text-blue-800 space-y-2">
                    <li>‚Ä¢ Automate notification from WF ‚Üí EROAD on offboarding</li>
                    <li>‚Ä¢ Or define process for WF to notify via EROAD portal</li>
                    <li>‚Ä¢ Ensure billing stops on same date</li>
                  </ul>
                </div>
                <div className="bg-white/70 rounded-lg p-5 border border-blue-200">
                  <h4 className="font-semibold text-blue-900 mb-3">Priority 3: Communication Loop</h4>
                  <ul className="text-sm text-blue-800 space-y-2">
                    <li>‚Ä¢ CC Welfare First when notifying customer</li>
                    <li>‚Ä¢ Close communication gap after "WF Live" email</li>
                    <li>‚Ä¢ Confirm customer received monitoring instructions</li>
                  </ul>
                </div>
                <div className="bg-white/70 rounded-lg p-5 border border-blue-200">
                  <h4 className="font-semibold text-blue-900 mb-3">Nice-to-Have: Automation</h4>
                  <ul className="text-sm text-blue-800 space-y-2">
                    <li>‚Ä¢ Auto-confirmation of MyEROAD first login</li>
                    <li>‚Ä¢ Extended vault link validity alerts</li>
                    <li>‚Ä¢ Onboarding form validation</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
